(this["webpackJsonpdurer-quiz-frontend"]=this["webpackJsonpdurer-quiz-frontend"]||[]).push([[0],{113:function(e,t,n){},132:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),s=n(12),c=n.n(s),o=(n(132),n(113),n(40)),l=n(4),u=n(9),d=n.n(u),p=n(10),b=n(15),m="https://verseny.durerinfo.hu/api/v1",x=n(24),j=n.n(x);function f(e){return h.apply(this,arguments)}function h(){return(h=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/exercise/current"),{method:"GET",headers:Object(p.a)({},t)});case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",null);case 5:return e.prev=5,e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(5),console.log(n),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function g(){return(g=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"/team/my"),{method:"GET",headers:Object(p.a)({},t)});case 3:if((n=e.sent).ok){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function v(){return(v=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"/team/my/submissions"),{method:"GET",headers:Object(p.a)({},t)});case 3:if((n=e.sent).ok){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function O(){return(O=Object(b.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"/category/").concat(n),{method:"GET",headers:Object(p.a)({},t)});case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",{starts_at:j()(r.starts_at),ends_at:j()(r.ends_at),uuid:r.category,name:r.name});case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"/login/team/send-ott"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 3:if(!(n=e.sent).ok){e.next=6;break}return e.abrupt("return","");case 6:if(420!==n.status){e.next=8;break}return e.abrupt("return","T\xfal sok pr\xf3b\xe1lkoz\xe1s!");case 8:if(403!==n.status){e.next=12;break}return e.abrupt("return","Tiltott m\u0171velet!");case 12:return e.abrupt("return","A backenden m\xe9g nem \xe9l az url");case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","Nem siker\xfclt csatlakozni a szerverhez");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var w,z=n(5),N=n(173),T=Object(N.a)((function(e){return{root:Object(z.a)({width:"100%",marginTop:"-120px",overflow:"hidden"},e.breakpoints.down(1e3),{marginTop:"-5px",paddingLeft:"7px",paddingRight:"7px"}),header:{backgroundColor:e.palette.primary.main,padding:"30px 60px",borderRadius:"30px 30px 0px 0px",color:e.palette.primary.contrastText},contentDiv:{backgroundColor:e.palette.secondary.main,padding:"30px 15px 0px 15px",borderRadius:"0px 0px 30px 30px",color:e.palette.secondary.contrastText},mainTitle:{fontSize:"30px"},subTitle:{fontSize:"20px"},rightTitle:{float:"right"}}})),S=function(e){var t=T();return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsxs)("div",{className:t.header,children:[Object(a.jsxs)("div",{className:t.mainTitle,children:[e.mainTitle,Object(a.jsx)("span",{className:t.rightTitle,children:e.rightTitle})]}),Object(a.jsx)("div",{className:t.subTitle,children:e.subTitle})]}),Object(a.jsx)("div",{className:t.contentDiv,children:e.children})]})},C=n(181),_=n(83),I=function(e){return Object(a.jsx)("div",{className:e.className,style:e.style,children:Object(a.jsx)(_.c,{initialValues:e.initialValues,validationSchema:e.validationSchema,onSubmit:function(t,n){var a=n.setSubmitting;n.setTouched;e.onSubmit(t,a)},children:Object(a.jsx)(_.b,{children:e.children})})})},E=n(39);!function(e){e[e.default=0]="default",e[e.noBackground=1]="noBackground",e[e.floating=2]="floating"}(w||(w={}));var B,L=function(e){var t=i.a.useState(!1),n=Object(l.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)("div",{className:e.className,style:e.style,children:Object(a.jsx)(_.a,{name:e.name,children:function(t){var n=t.field,c=(t.form,t.meta);return Object(a.jsx)("div",{children:i.a.createElement(e.component,Object(p.a)({name:e.name,label:e.label,error:(!!c.touched||r)&&!!c.error,helperText:(!!c.touched||r)&&c.error,placeholder:e.placeholder,onChange:function(t){e.onChange&&e.onChange(t),n.onChange(t)},type:e.type,value:n.value,disabled:e.disabled,style:e.componentStyle,onBlur:function(){r||s(!0),"function"===typeof e.setHasBlured&&(null===e||void 0===e||e.setHasBlured())}},e.otherProps))})}})})},A=n(3),W=n(185);!function(e){e[e.Inline=0]="Inline",e[e.Above=1]="Above"}(B||(B={}));var D=Object(N.a)((function(e){return{inlineInput:{width:"100%",marginLeft:"15px",marginRight:"15px","& .MuiOutlinedInput-root":{height:"60px",borderRadius:"34px"}},aboveInput:{width:"100%","& .MuiOutlinedInput-root":{height:"40px",borderRadius:"30px"}},label:{fontSize:"18px",fontWeight:"bold"}}})),P=function(e){var t=D(),n=e.labelWhere,r=e.label,i=(e.color,e.size,e.ref,e.className),s=Object(A.a)(e,["labelWhere","label","color","size","ref","className"]);return Object(a.jsxs)("div",{className:i,style:n===B.Inline?{display:"flex",flexFlow:"row",alignItems:"center"}:{display:"flex",flexFlow:"column"},children:[Object(a.jsx)("div",{style:n===B.Above?{marginLeft:"30px"}:{},className:t.label,children:r}),Object(a.jsx)(W.a,Object(p.a)(Object(p.a)({},s),{},{variant:"outlined",label:"",className:n===B.Inline?t.inlineInput:t.aboveInput}))]})},R=n(186),U=n(180),q=Object(N.a)((function(e){return{root:{"&.MuiButton-contained":{height:"60px",borderRadius:"34px",fontSize:"18px"},"&.MuiButton-contained.Mui-disabled":{backgroundColor:"#e0e0e0"}}}})),F=function(e){var t=q();return Object(a.jsx)(R.a,{disabled:!!e.disabled||e.loading,onClick:function(t){e.onClick&&e.onClick(t)},color:"primary",className:"".concat(t.root," ").concat(e.className),variant:"contained",type:e.type,style:e.color?{backgroundColor:e.color}:{},children:e.loading?Object(a.jsxs)(a.Fragment,{children:[e.label,Object(a.jsx)(U.a,{size:30,style:{marginLeft:"20px"}})]}):e.label})},H=n(55),M=n(27),Y=n(31),V=n(118),K="kjqAEKeFkMpOvOZrzcvp",J=function(){function e(){Object(M.a)(this,e),this.userCache=null}return Object(Y.a)(e,[{key:"saveToken",value:function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem(K,n),a=e.decodeToken(n),this.userCache={token:n,decodedToken:a};case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getToken",value:function(){if("undefined"===typeof localStorage)return null;var e=localStorage.getItem(K);return e||null}},{key:"getCurrentUser",value:function(){var t=Object(b.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getToken()){t.next=3;break}return t.abrupt("return",null);case 3:if(!this.userCache){t.next=7;break}if(n!==this.userCache.token||e.isTokenExpired(this.userCache.decodedToken)){t.next=6;break}return t.abrupt("return",{email:this.userCache.decodedToken.email,categoryUuid:this.userCache.decodedToken.category.uuid,categoryName:this.userCache.decodedToken.category.name});case 6:this.userCache=null;case 7:if(a=e.decodeToken(n),!e.isTokenExpired(a)){t.next=10;break}return t.abrupt("return",null);case 10:return this.userCache={token:n,decodedToken:a},t.abrupt("return",{email:a.email,categoryUuid:a.category.uuid,categoryName:a.category.name});case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isUserLoggedIn",value:function(){var t=this.getToken();return!!t&&!e.isTokenExpired(t)}},{key:"logout",value:function(){this.userCache=null,localStorage.removeItem(K)}},{key:"login",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/login/team"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"email-password",email:t,password:n})});case 2:if((a=e.sent).ok){e.next=17;break}return e.next=6,a.json();case 6:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===r;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=r.error;case 15:return i=e.t2,e.abrupt("return","Unauthorized"===i?"Hib\xe1s email/jelsz\xf3":"Valami hiba t\xf6rt\xe9nt!");case 17:return e.next=19,a.text();case 19:return s=e.sent,e.next=22,this.saveToken(s);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loginOtt",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/login/team"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"one-time-token",email:t,token:n})});case 2:if((a=e.sent).ok){e.next=17;break}return e.next=6,a.json();case 6:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===r;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=r.error;case 15:return i=e.t2,e.abrupt("return","Unauthorized"===i?"Hib\xe1s email":"Token not found"===i?"Nem l\xe9tez\u0151 token":"Valami hiba t\xf6rt\xe9nt!");case 17:return e.next=19,a.text();case 19:return s=e.sent,e.next=22,this.saveToken(s);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addListener",value:function(t){var n=this;if("undefined"!==typeof window&&!e.wasListenerAddedYet){e.wasListenerAddedYet=!0;var a=null;window.addEventListener("storage",function(){var e=Object(b.a)(d.a.mark((function e(r){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===r||void 0===r?void 0:r.key)===K){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.getCurrentUser();case 4:i=e.sent,a!==i&&(t(i),a=i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}],[{key:"isTokenExpired",value:function(e){return(new Date).getTime()/1e3>e.exp}},{key:"decodeToken",value:function(e){return Object(V.a)(e)}}]),e}();J.wasListenerAddedYet=!1;var G=Object(o.b)({key:"current-user",default:null}),Z=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=(t[0],t[1]);return Object(r.useEffect)((function(){if("undefined"!==typeof window){var e=new J;e.getCurrentUser().then((function(e){n(e)})),e.addListener(n)}}),[]),null},Q=new J,X=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=(t[0],t[1],Q.getToken());return{Authorization:"Bearer ".concat(n)}},$=Object(N.a)((function(e){var t,n;return{late:Object(z.a)({color:"#d50000",fontSize:"11px"},e.breakpoints.down(1200),{display:"none"}),red:{color:"#d50000"},redInfo:Object(z.a)({display:"none",color:"#d50000",fontSize:"11px"},e.breakpoints.down(1200),{display:"block"}),redInfoBig:{color:"#d50000",fontSize:"14px",marginLeft:"55px"},grat:{fontSize:"18px",fontWeight:"bold",textAlign:"center"},table:(t={marginTop:"20px",marginLeft:"10px",borderCollapse:"collapse",fontSize:"18px"},Object(z.a)(t,"& td",Object(z.a)({borderStyle:"solid",borderColor:"#000",borderWidth:"1px",textAlign:"center",padding:"5px",minWidth:"40px"},e.breakpoints.down(800),{minWidth:"0px",padding:"0px"})),Object(z.a)(t,e.breakpoints.down(1200),{width:"100%",marginLeft:"0px"}),Object(z.a)(t,e.breakpoints.down(800),{fontSize:"11px"}),t),sum:{fontSize:"18px",fontWeight:"bold",marginTop:"35px",marginLeft:"55px"},empty:{height:"25px"},button:{marginTop:"10px",width:"250px"},buttonContainer:{width:"100%",display:"flex",flexFlow:"column",alignItems:"center"},firstry:{backgroundColor:"#3fc523"},scondtry:{backgroundColor:"#9beb53"},thirdtry:{backgroundColor:"#d5eb42"},errortry:{backgroundColor:"#ee5555"},colorsContainer:(n={marginTop:"25px",display:"flex",alignItems:"center",flexWrap:"wrap"},Object(z.a)(n,"& div",{width:"40px",height:"40px",marginRight:"7px"}),Object(z.a)(n,"& span",{marginRight:"25px"}),n),tableContainer:{display:"flex",flexFlow:"column",alignItems:"center"}}})),ee=function(e){for(var t=$(),n=Object(r.useState)([]),i=Object(l.a)(n,2),s=i[0],c=i[1],o=new Map,u=0;u<s.length;u++){var d=o.get(s[u].exercise_uuid);d?j()(d.submitted_at).isBefore(j()(s[u].submitted_at))&&o.set(s[u].exercise_uuid,{point:s[u].points_earned,submitted_at:s[u].submitted_at,lastTry:s[u].sequence}):o.set(s[u].exercise_uuid,{point:s[u].points_earned,submitted_at:s[u].submitted_at,lastTry:s[u].sequence})}var p=[],b=0;o.forEach((function(t){j()(t.submitted_at).isBefore(e.endsAt)&&(b+=t.point),p.push(t)})),p.sort((function(e,t){return j()(e.submitted_at).isAfter(j()(t.submitted_at))?1:-1}));var m=X();return Object(r.useEffect)((function(){(function(e){return v.apply(this,arguments)})(m).then((function(e){null!=e&&c(e)})).catch((function(e){console.log(e)}))}),[]),Object(a.jsxs)(S,{mainTitle:"Eredm\xe9nyek",subTitle:e.teamName,children:[Object(a.jsx)("div",{className:t.grat,children:"Gratul\xe1lunk a verseny befejez\xe9s\xe9hez"}),Object(a.jsxs)("div",{className:t.tableContainer,children:[Object(a.jsxs)("table",{className:t.table,children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Feladat"}),p.map((function(n,r){return Object(a.jsxs)("td",{className:j()(n.submitted_at).isAfter(e.endsAt)?t.red:"",children:[r+1,".",j()(n.submitted_at).isAfter(e.endsAt)?Object(a.jsx)("span",{className:t.late,children:"Id\u0151n t\xfali megold\xe1s"}):""]})}))]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Pontsz\xe1m"}),p.map((function(e,n){var r=t.errortry;if(e.point>0)switch(e.lastTry){case 0:r=t.firstry;break;case 1:r=t.scondtry;break;case 2:r=t.thirdtry}return Object(a.jsx)("td",{className:r,children:e.point})}))]})]}),Object(a.jsx)("div",{className:t.redInfo,children:"\xa0A piros sorsz\xe1mmal jel\xf6lt feladatok id\u0151n t\xfal lettek leadva"}),Object(a.jsxs)("div",{className:t.colorsContainer,children:[Object(a.jsx)("div",{className:t.firstry}),Object(a.jsx)("span",{children:"1. pr\xf3b\xe1lkoz\xe1s"}),Object(a.jsx)("div",{className:t.scondtry}),Object(a.jsx)("span",{children:"2. pr\xf3b\xe1lkoz\xe1s"}),Object(a.jsx)("div",{className:t.thirdtry}),Object(a.jsx)("span",{children:"3. pr\xf3b\xe1lkoz\xe1s"}),Object(a.jsx)("div",{className:t.errortry}),Object(a.jsx)("span",{children:"hib\xe1s v\xe1lasz"})]})]}),Object(a.jsxs)("div",{className:t.sum,children:["\xa0\xd6sszpontsz\xe1m: ",b]}),Object(a.jsx)("div",{className:t.redInfoBig,children:"\xa0Ez egy el\u0151zetes eredm\xe9ny, m\xe9g le fogjuk ellen\u0151rizni a v\xe1laszaitokat, \xe9s el\u0151fordulhat, hogy v\xe1ltozik a pontsz\xe1m (b\xe1rmelyik ir\xe1nyba)."}),Object(a.jsx)("div",{className:t.buttonContainer,children:Object(a.jsx)(F,{className:t.button,type:"button",label:"Szuper!",onClick:function(){window.location.href="/"}})}),Object(a.jsx)("div",{className:t.empty})]})},te=Object(N.a)((function(e){return{formDiv:{display:"flex",maxWidth:"fit-content",marginLeft:"auto",marginRight:"auto",flexWrap:"wrap",alignItems:"center",paddingBottom:"10px"},endDiv:Object(z.a)({display:"flex",maxWidth:"350px",marginLeft:"auto",marginRight:"auto",flexWrap:"wrap",alignItems:"center",paddingBottom:"10px"},e.breakpoints.down(650),{maxWidth:"100%"}),input:Object(z.a)({width:"300px"},e.breakpoints.down(1e3),{marginBottom:"15px",width:"100%"}),endButon:Object(z.a)({width:"300px",marginLeft:"15px"},e.breakpoints.down(1e3),{marginBottom:"15px",width:"100%",marginLeft:"0px"}),button:Object(z.a)({width:"50%"},e.breakpoints.down(650),{width:"100%"})}})),ne=function(e){var t,n,i=Object(H.b)().enqueueSnackbar,s=te(),c=Object(r.useState)(!1),o=Object(l.a)(c,2),u=o[0],x=o[1],f=Object(r.useState)({sequence:e.exercise.sequence_number,points:e.exercise.max_points-e.exercise.sequence_number,order:e.exercise.category_ord,task:e.exercise.description,attachments:e.exercise.attachments,title:e.exercise.title,exercise_uuid:e.exercise.uuid}),h=Object(l.a)(f,2),g=h[0],v=h[1],O=Object(r.useState)(!1),k=Object(l.a)(O,2),y=k[0],w=k[1],z=Object(r.useState)(""),N=Object(l.a)(z,2),T=N[0],_=N[1],A=Object(r.useState)(!1),W=Object(l.a)(A,2),D=W[0],R=W[1],U=Object(r.useState)([]),q=Object(l.a)(U,2),M=q[0],Y=q[1],V=Object(r.useState)(!1),K=Object(l.a)(V,2),J=K[0],G=K[1],Z=function(e){var t=e.diff(j.a.now(),"seconds");t<0&&!J&&G(!0),_("".concat(Math.floor(t/60)>9?Math.floor(t/60):"0"+Math.floor(t/60)," : ").concat(t%60>9?t%60:"0"+t%60))};Object(r.useEffect)((function(){!D&&e.endsAt&&(setInterval(Z,1e3,e.endsAt),R(!0))}),[e.endsAt]);var Q='<latex-js hyphenate="false">'.concat(g.task,"\n</latex-js>");return g.exercise_uuid?Object(a.jsxs)(S,{mainTitle:"".concat(g.order+1,".feladat: ").concat(g.title),rightTitle:"".concat((null===(t=e.endsAt)||void 0===t?void 0:t.isAfter(j.a.now()))?"H\xe1tral\xe9v\u0151 id\u0151: ".concat(T):"Lej\xe1rt az id\u0151"),subTitle:"".concat(g.sequence+1,". pr\xf3ba, ").concat(g.points," pont\xe9rt"),children:[Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:Q}}),null===(n=g.attachments)||void 0===n?void 0:n.map((function(e){return Object(a.jsx)("img",{src:e.uri,style:{maxWidth:"80%",display:"flex",marginLeft:"auto",marginRight:"auto"},alt:"feladatK\xe9p (ha nem t\xf6lt\xf6tt be pr\xf3b\xe1ld friss\xedteni az oldalt)"})})),Object(a.jsx)(C.a,{variant:"middle",style:{marginTop:"10px",marginBottom:"10px"}}),Object(a.jsx)(I,{initialValues:{result:""},validationSchema:E.b().shape({result:E.a().integer("Eg\xe9sz sz\xe1mot kell \xedrni").typeError("Sz\xe1mot kell \xedrnod").min(1,"A v\xe1lasz 1 \xe9s 9999 k\xf6z\xf6tt van").max(9999,"A v\xe1lasz 1 \xe9s 9999 k\xf6z\xf6tt van").required("Nem \xedrt\xe1l semmi v\xe1laszt!")}),onSubmit:function(){var t=Object(b.a)(d.a.mark((function t(n){var a,r,s,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x(!0),!M.includes(n.result)){t.next=5;break}return i("Ezt a v\xe1laszt m\xe1r pr\xf3b\xe1lt\xe1tok",{variant:"error"}),x(!1),t.abrupt("return");case 5:return t.prev=5,t.next=8,fetch("".concat(m,"/submit"),{method:"PUT",headers:Object(p.a)({"Content-Type":"application/json"},e.auth),body:JSON.stringify({exercise_uuid:g.exercise_uuid,guess:n.result,sequence:g.sequence})});case 8:if((r=t.sent).ok){t.next=32;break}return t.t0=i,t.next=13,r.json();case 13:if(t.t3=s=t.sent,t.t2=null===t.t3,t.t2){t.next=17;break}t.t2=void 0===s;case 17:if(!t.t2){t.next=21;break}t.t4=void 0,t.next=22;break;case 21:t.t4=s.error;case 22:if(t.t1=t.t4,t.t1){t.next=25;break}t.t1="Hiba a bek\xfcld\xe9s sor\xe1n!";case 25:return t.t5=t.t1,t.t6={variant:"error"},(0,t.t0)(t.t5,t.t6),n.result="",w(!y),x(!1),t.abrupt("return");case 32:return t.next=34,r.json();case 34:c=t.sent,o=null===c||void 0===c?void 0:c.next,(null===c||void 0===c||null===(a=c.submission)||void 0===a?void 0:a.guess_correct)?(Y([]),i("A v\xe1lasz helyes volt",{variant:"success"})):((null===o||void 0===o?void 0:o.uuid)===g.exercise_uuid?((l=M).push(n.result),Y(l)):Y([]),i("A v\xe1lasz sajnos nem volt j\xf3",{variant:"error"})),(null===o||void 0===o?void 0:o.title)?v({sequence:o.sequence_number,points:o.max_points-o.sequence_number,order:o.category_ord,task:o.description,attachments:o.attachments||[],title:o.title,exercise_uuid:o.uuid}):v({sequence:0,points:0,order:0,task:"V\xe9gig \xe9rtetek a feladatokon",attachments:[],title:"",exercise_uuid:""}),n.result="",w(!y),x(!1),t.next=47;break;case 43:t.prev=43,t.t7=t.catch(5),i("Hiba a bek\xfcld\xe9s sor\xe1n! Pr\xf3b\xe1ld \xfajrat\xf6lteni az oldalt",{variant:"error"}),x(!1);case 47:case"end":return t.stop()}}),t,null,[[5,43]])})));return function(e){return t.apply(this,arguments)}}(),children:Object(a.jsxs)("div",{className:s.formDiv,children:[Object(a.jsx)(L,{name:"result",type:"text",component:P,label:"V\xe1lasz:",otherProps:{labelWhere:B.Inline},className:s.input},"resInput".concat(y)),Object(a.jsx)(F,{type:"submit",className:s.input,label:"Bek\xfcld",loading:u}),J&&Object(a.jsx)(F,{type:"button",className:s.endButon,label:"Befejez\xe9s",onClick:function(){window.location.href="/"},color:"#E3998A"})]})})]}):Object(a.jsx)(ee,{endsAt:e.endsAt,teamName:e.teamName,setInfo:e.setInfo})},ae=function(e){var t,n,r;return Object(a.jsxs)("picture",{children:[Object(a.jsx)("source",{srcSet:"".concat("/durer-quiz-frontend").concat(null===(t=e.picture)||void 0===t?void 0:t.webPUrl),type:"image/webp"}),Object(a.jsx)("img",{style:e.style,className:e.className,src:"".concat("/durer-quiz-frontend").concat(null===(n=e.picture)||void 0===n?void 0:n.jpegOrPngUrl),alt:e.picture.alt,title:null===(r=e.picture)||void 0===r?void 0:r.title})]})},re=Object(N.a)((function(e){var t;return{root:(t={width:"100%",padding:"30px 60px",borderRadius:"30px",color:e.palette.secondary.contrastText,marginTop:"-120px",overflow:"hidden",backgroundColor:"#fff",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"},Object(z.a)(t,e.breakpoints.down(700),{marginLeft:"7px",marginRight:"7px",width:"calc(100% - 14px)"}),Object(z.a)(t,e.breakpoints.down(1e3),{marginTop:"-5px"}),t),formDiv:{width:"calc(100% - 20px)",minHeight:"320px",display:"flex",marginLeft:"10px",flexFlow:"column",marginRight:"10px",flexWrap:"wrap",alignItems:"left",paddingBottom:"10px"},infoElement:{fontSize:"15px",marginBottom:"15px"},element:{width:"100%",marginBottom:"20px"},picture:{width:"550px",position:"relative",zIndex:1,marginLeft:"55%",marginTop:"-200px"},link:Object(z.a)({alignSelf:"start",color:"#3B2E2E",cursor:"pointer",textDecoration:"underline"},"&:hover",{color:"#707070"})}})),ie=function(e){var t,n,i=X(),s=Object(r.useState)(!1),c=Object(l.a)(s,2),u=c[0],d=c[1],p=Object(r.useState)(!1),b=Object(l.a)(p,2),m=b[0],x=b[1],h=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){Q.logout(),n(null)}}(),g=re(),v=function(t,n){var a=j()(),r=(null===t||void 0===t?void 0:t.isBefore(a))&&(null===n||void 0===n?void 0:n.isAfter(a));r!==m&&(console.log("ratatata"),r?(console.log("insidejoke"),f(i).then((function(t){null!==t?e.setExercise(t):e.setExercise({}),x(r)}))):x(r))};return Object(r.useEffect)((function(){e.setExercise({}),!u&&e.categoryStart&&(setInterval(v,1e3,e.categoryStart,e.categoryEnd),d(!0))}),[e.categoryStart]),Object(a.jsxs)("div",{className:g.root,style:{maxHeight:"400px"},children:[Object(a.jsx)("div",{style:{position:"relative",zIndex:2,minHeight:"320px"},children:Object(a.jsxs)("div",{className:g.formDiv,children:[Object(a.jsxs)("div",{className:g.infoElement,children:[Object(a.jsx)("b",{children:"Csapatn\xe9v:"})," ",e.teamName]}),Object(a.jsxs)("div",{className:g.infoElement,children:[Object(a.jsx)("b",{children:"Kateg\xf3ria:"})," ",e.categoryName]}),Object(a.jsxs)("div",{className:g.infoElement,children:[Object(a.jsx)("b",{children:"Kit\xf6lt\xe9s kezdete:"})," ",null===(t=e.categoryStart)||void 0===t?void 0:t.format("YYYY:MM:DD HH:mm")]}),Object(a.jsxs)("div",{className:g.infoElement,children:[Object(a.jsx)("b",{children:"Kit\xf6lt\xe9s v\xe9ge:"})," ",null===(n=e.categoryEnd)||void 0===n?void 0:n.format("YYYY:MM:DD HH:mm")]}),Object(a.jsx)("div",{style:{display:"flex",flex:1}}),Object(a.jsx)(F,{type:"button",label:e.teamInProgress?"Kit\xf6lt\xe9s folytat\xe1sa":e.teamFinished?"Eredm\xe9nyek megtekint\xe9se":"Kit\xf6lt\xe9s megkezd\xe9se",onClick:function(t){e.setInfo(!1)},className:g.element,disabled:!m&&!e.teamFinished}),Object(a.jsx)("a",{className:g.link,onClick:function(){h()},children:"Kijelentkez\xe9s"})]})}),Object(a.jsx)(ae,{className:g.picture,picture:{webPUrl:"/logo_kicsik_nagyok.png",jpegOrPngUrl:"/logo_kicsik_nagyok.png",alt:"login",title:"login"}})]})},se=n(119),ce=Object(se.a)({palette:{primary:{main:"#D7B221",contrastText:"#fff"},secondary:{main:"#fff",contrastText:"#3B2E2E"},background:{default:"#DCBC88"}},typography:{fontFamily:["Poppins","-apple-system","sans-serif"].join(",")},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}}),oe=n(182),le=n(183),ue=n(184),de=Object(N.a)((function(e){var t,n,a;return{bg:(t={display:"none"},Object(z.a)(t,e.breakpoints.up(1400),{display:"block"}),Object(z.a)(t,"position","absolute"),Object(z.a)(t,"top",0),Object(z.a)(t,"left",0),Object(z.a)(t,"filter","blur(20px)"),Object(z.a)(t,"-webkit-filter","blur(20px)"),Object(z.a)(t,"width","100%"),Object(z.a)(t,"transform","scale(1.1)"),t),bgDiv:{height:"100%",zIndex:0,position:"relative",overflow:"hidden"},root:Object(z.a)({},e.breakpoints.up(1400),{left:"50%",marginLeft:"-50%",marginRight:"-50%",maxWidth:"100%",position:"relative",right:"50%",width:"100%"}),image:(n={maxWidth:"100%",width:"1400px",marginBottom:"-5px",height:"auto",marginLeft:"auto",marginRight:"auto",zIndex:20,marginTop:"-7%"},Object(z.a)(n,e.breakpoints.up(1400),{marginBottom:"-5px",height:"auto",width:"1400px",maxWidth:"100%",marginTop:"-100px"}),Object(z.a)(n,e.breakpoints.down(1e3),{marginTop:"0px",marginBottom:"-5px",height:"auto",width:"100%",maxWidth:"100%"}),n),imageDiv:{display:"flex",justifyContent:"center",transform:"translate(0%, -100%)"},itemDiv:{display:"flex",justifyContent:"center"},magicBox:(a={},Object(z.a)(a,e.breakpoints.down(1e3),{height:"0px",marginTop:"0px"}),Object(z.a)(a,"width","100%"),Object(z.a)(a,"zIndex",2),Object(z.a)(a,"position","relative"),Object(z.a)(a,"marginTop","-49px"),Object(z.a)(a,"backgroundColor","#DCBC88"),Object(z.a)(a,"height","50px"),a)}})),pe=function(e){var t=de();return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsxs)(oe.a,{theme:ce,children:[Object(a.jsx)(le.a,{}),Object(a.jsxs)(H.a,{maxSnack:3,children:[Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)("div",{className:t.itemDiv,children:Object(a.jsxs)("div",{style:{width:"100%",zIndex:1,position:"relative"},children:[Object(a.jsx)("div",{className:t.bgDiv,children:Object(a.jsx)(ae,{className:t.bg,picture:{webPUrl:"/csakszoveg.webp",jpegOrPngUrl:"/csakszoveg.jpg",alt:"header",title:"header"}})}),Object(a.jsx)("div",{className:t.imageDiv,children:Object(a.jsx)(ae,{className:t.image,picture:{webPUrl:"/csakszoveg.webp",jpegOrPngUrl:"/csakszoveg.jpg",alt:"header",title:"header"}})})]})})}),Object(a.jsx)("div",{className:t.magicBox}),Object(a.jsx)(ue.a,{style:{paddingLeft:0,paddingRight:0,zIndex:3,position:"relative",paddingBottom:"50px",maxWidth:"1200px"},children:Object(a.jsx)("div",{children:e.children})})]})]})})},be=Object(N.a)((function(e){var t;return{root:(t={width:"100%",padding:"30px 60px",borderRadius:"30px",color:e.palette.secondary.contrastText,marginTop:"-120px",overflow:"hidden",backgroundColor:"#fff",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"},Object(z.a)(t,e.breakpoints.down(700),{marginLeft:"7px",marginRight:"7px",width:"calc(100% - 14px)"}),Object(z.a)(t,e.breakpoints.down(1e3),{marginTop:"-5px"}),t),formDiv:{width:"calc(100% - 20px)",display:"flex",marginLeft:"10px",flexFlow:"column",marginRight:"10px",flexWrap:"wrap",alignItems:"center",paddingBottom:"10px"},element:{width:"100%",marginBottom:"20px"},picture:{width:"550px",position:"relative",zIndex:1,marginLeft:"55%",marginTop:"-200px"},link:Object(z.a)({alignSelf:"start",color:"#3B2E2E",cursor:"pointer",textDecoration:"underline"},"&:hover",{color:"#707070"})}})),me=function(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(!1),c=Object(l.a)(s,2),u=c[0],p=c[1],m=Object(H.b)().enqueueSnackbar,x=be(),j=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){var e=Object(b.a)(d.a.mark((function e(t,a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.login(t,a);case 2:if(r=e.sent){e.next=8;break}return e.next=6,Q.getCurrentUser();case 6:i=e.sent,n(i);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}();return Object(a.jsxs)("div",{className:x.root,style:{maxHeight:"400px"},children:[0==n&&Object(a.jsx)(I,{style:{position:"relative",zIndex:2},initialValues:{email:"",password:""},validationSchema:E.b().shape({email:E.c().email("\xc9rv\xe9nytelen email form\xe1tum").required("E-mail kit\xf6lt\xe9se k\xf6telez\u0151")}),onSubmit:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,j(t.email,t.password);case 3:(n=e.sent)&&m(n,{variant:"error"}),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(a.jsxs)("div",{className:x.formDiv,children:[Object(a.jsx)(L,{name:"email",type:"text",component:P,label:"E-mail",otherProps:{labelWhere:B.Above},className:x.element}),Object(a.jsx)(L,{name:"password",type:"password",component:P,label:"jelsz\xf3",otherProps:{labelWhere:B.Above},className:x.element}),Object(a.jsx)(F,{type:"submit",label:"Bel\xe9p\xe9s",loading:u,className:x.element}),Object(a.jsx)("a",{className:x.link,onClick:function(){i(1)},children:"Elfelejtettem a jelszavam"})]})}),1==n&&Object(a.jsx)(I,{style:{position:"relative",zIndex:2},initialValues:{email:""},validationSchema:E.b().shape({email:E.c().email("\xc9rv\xe9nytelen email form\xe1tum").required("Email sz\xfcks\xe9ges")}),onSubmit:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,k(t.email);case 3:(n=e.sent)?m(n,{variant:"error"}):(m("Az emailt sikeresen elk\xfcldt\xfck!",{variant:"success"}),window.location.href="/"),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(a.jsxs)("div",{className:x.formDiv,children:[Object(a.jsx)(L,{name:"email",type:"text",component:P,label:"E-mail",otherProps:{labelWhere:B.Above},className:x.element}),Object(a.jsx)(F,{type:"submit",label:"K\xfcld\xe9s",loading:u,className:x.element}),Object(a.jsx)("a",{className:x.link,onClick:function(){i(0)},children:"vissza a bejelentkez\xe9shez"})]})}),Object(a.jsx)(ae,{className:x.picture,picture:{webPUrl:"/logo_kicsik_nagyok.png",jpegOrPngUrl:"/logo_kicsik_nagyok.png",alt:"login",title:"login"}})]})},xe=Object(N.a)((function(e){var t;return{root:(t={width:"100%",padding:"30px 60px",borderRadius:"30px",color:e.palette.secondary.contrastText,marginTop:"-120px",overflow:"hidden",backgroundColor:"#fff",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"},Object(z.a)(t,e.breakpoints.down(700),{marginLeft:"7px",marginRight:"7px",width:"calc(100% - 14px)"}),Object(z.a)(t,e.breakpoints.down(1e3),{marginTop:"-5px"}),t),formDiv:{width:"calc(100% - 20px)",display:"flex",marginLeft:"10px",flexFlow:"column",marginRight:"10px",flexWrap:"wrap",alignItems:"center",paddingBottom:"10px"},element:{width:"100%",marginBottom:"20px"},picture:{width:"550px",position:"relative",zIndex:1,marginLeft:"55%",marginTop:"-200px"},link:Object(z.a)({alignSelf:"start",color:"#3B2E2E",cursor:"pointer",textDecoration:"underline"},"&:hover",{color:"#707070"})}})),je=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(H.b)().enqueueSnackbar,u=xe(),p=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){var e=Object(b.a)(d.a.mark((function e(t,a){var r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.loginOtt(t,a);case 2:if(r=e.sent){e.next=8;break}return e.next=6,Q.getCurrentUser();case 6:i=e.sent,n(i);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}(),m=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="/";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:u.root,style:{maxHeight:"400px"},children:[Object(a.jsx)(I,{style:{position:"relative",zIndex:2},initialValues:{email:"",password:""},validationSchema:E.b().shape({email:E.c().email("\xc9rv\xe9nytelen email form\xe1tum").required("E-mail kit\xf6lt\xe9se k\xf6telez\u0151")}),onSubmit:function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,p(n.email,e.token);case 3:(a=t.sent)?c(a,{variant:"error"}):window.location.href="/",s(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:Object(a.jsxs)("div",{className:u.formDiv,children:[Object(a.jsx)(L,{name:"email",type:"text",component:P,label:"E-mail",otherProps:{labelWhere:B.Above},className:u.element}),Object(a.jsx)(F,{type:"submit",label:"Bel\xe9p\xe9s",loading:i,className:u.element}),Object(a.jsx)("a",{className:u.link,onClick:function(){m()},children:"vissza a bejelentkez\xe9shez"})]})}),Object(a.jsx)(ae,{className:u.picture,picture:{webPUrl:"/logo_kicsik_nagyok.png",jpegOrPngUrl:"/logo_kicsik_nagyok.png",alt:"login",title:"login"}})]})},fe=n(17);var he=function(){var e,t=Object(r.useState)(!0),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)({uuid:"",email:"",name:""}),u=Object(l.a)(c,2),d=u[0],p=u[1],b=Object(r.useState)({}),m=Object(l.a)(b,2),x=m[0],h=m[1],v=Object(r.useState)({}),k=Object(l.a)(v,2),y=k[0],w=k[1],z=new URLSearchParams(Object(fe.e)().search).get("one-time-auth"),N=X(),T=function(){var e=Object(o.c)(G),t=Object(l.a)(e,2),n=t[0];return t[1],n}();return Object(r.useEffect)((function(){T&&(function(e){return g.apply(this,arguments)}(N).then((function(e){null!==e&&p(e)})),function(e,t){return O.apply(this,arguments)}(N,T.categoryUuid).then((function(e){null!==e&&w(e)})),f(N).then((function(e){null!==e&&h(e)})))}),[T]),z?Object(a.jsx)(pe,{children:Object(a.jsx)(je,{token:z})}):Object(a.jsxs)(pe,{children:[Object(a.jsx)(Z,{}),!T&&Object(a.jsx)(me,{}),T&&i&&Object(a.jsx)(ie,{exercise:x,setExercise:h,teamFinished:null===(e=y.starts_at)||void 0===e?void 0:e.isBefore(j.a.now()),teamInProgress:(null===x||void 0===x?void 0:x.category_ord)>0,setInfo:s,teamName:d.name,categoryName:y.name,categoryEnd:y.ends_at,categoryStart:y.starts_at}),T&&!i&&Object(a.jsx)(ne,{auth:N,exercise:x,endsAt:null===y||void 0===y?void 0:y.ends_at,teamName:d.name,setInfo:s})]})},ge=n(105);var ve=function(){return Object(a.jsx)(o.a,{children:Object(a.jsx)(ge.a,{children:Object(a.jsx)(fe.a,{path:"/",component:he})})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,187)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(ve,{})}),document.getElementById("root")),Oe()}},[[140,1,2]]]);
//# sourceMappingURL=main.336f71e0.chunk.js.map